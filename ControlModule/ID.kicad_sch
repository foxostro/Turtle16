(kicad_sch (version 20211123) (generator eeschema)

  (uuid 5600b446-cc57-4d99-a6dd-3cb2f076483c)

  (paper "USLetter")

  (title_block
    (title "ID")
    (date "2022-04-13")
    (rev "A")
    (comment 1 "Simultaneously, read the register file using indices extracted from the instruction word.")
    (comment 2 "effect conditional instructions.")
    (comment 3 "The decoder takes the condition code from the flags register into account to")
    (comment 4 "The instruction decoder turns a 5-bit opcode into an array of control signals.")
  )

  (lib_symbols
  )

  (junction (at 66.04 63.5) (diameter 0) (color 0 0 0 0)
    (uuid b9b8ad58-414a-4053-858b-06c5ac079524)
  )
  (junction (at 130.81 78.74) (diameter 0) (color 0 0 0 0)
    (uuid f3948324-ce3a-4786-8e6f-06525e602a33)
  )

  (wire (pts (xy 162.56 111.76) (xy 162.56 100.33))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 044452e8-a3b4-4d08-9835-701cc0a60807)
  )
  (bus (pts (xy 130.81 78.74) (xy 138.43 78.74))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 13b44301-e8b6-44a2-a883-05207972227f)
  )
  (bus (pts (xy 91.44 116.84) (xy 123.19 116.84))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 14be568d-2e52-4aed-b81b-dddc75cbdd07)
  )

  (wire (pts (xy 158.75 124.46) (xy 179.07 124.46))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 3036986f-780f-4e5b-8e4b-4e66acc1e072)
  )
  (bus (pts (xy 101.6 127) (xy 123.19 127))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 3f40e620-2b34-4c9e-b852-1ba39e3dbc3a)
  )

  (wire (pts (xy 82.55 86.36) (xy 80.01 86.36))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 61e795c9-5bb5-48b3-b7a0-cb64f04c7adc)
  )
  (wire (pts (xy 162.56 100.33) (xy 80.01 100.33))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 644a2620-03c0-4432-a2a3-b8177b485182)
  )
  (wire (pts (xy 158.75 119.38) (xy 179.07 119.38))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 6b732b9b-51f6-479d-b29b-3f7cb9c273ef)
  )
  (bus (pts (xy 123.19 114.3) (xy 106.68 114.3))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 6c5e0d12-8ed5-4c38-93b5-5d0f856a23b9)
  )
  (bus (pts (xy 101.6 121.92) (xy 123.19 121.92))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 70b621b6-45b5-43cb-9683-d589118723d7)
  )

  (wire (pts (xy 158.75 116.84) (xy 179.07 116.84))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 729e0aa9-1770-4b96-8a01-af601278faec)
  )
  (bus (pts (xy 101.6 124.46) (xy 123.19 124.46))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 73e2a101-0bc0-414b-9aa7-7eeb8a3caef1)
  )

  (wire (pts (xy 82.55 83.82) (xy 80.01 83.82))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 85762fc6-4dad-4d00-b3f3-d625c47e2b72)
  )
  (wire (pts (xy 80.01 88.9) (xy 82.55 88.9))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 89f897c4-98dd-4e30-9e76-7ca9bf021cd3)
  )
  (wire (pts (xy 158.75 129.54) (xy 179.07 129.54))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 8f577817-ea32-42aa-bedc-809b6d0ffec6)
  )
  (bus (pts (xy 58.42 63.5) (xy 66.04 63.5))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 91815931-350b-44ea-ae11-854683127765)
  )
  (bus (pts (xy 66.04 63.5) (xy 138.43 63.5))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 93a39263-9c5e-47f9-9459-ada72953833b)
  )

  (wire (pts (xy 80.01 100.33) (xy 80.01 88.9))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 9f9c31ca-425c-43ab-adfe-2e1ae4fe8686)
  )
  (wire (pts (xy 162.56 111.76) (xy 158.75 111.76))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid a97a52d6-fe14-4f06-b35e-2dc42532437e)
  )
  (bus (pts (xy 82.55 78.74) (xy 66.04 78.74))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid aeef9f8f-2515-46d6-a613-4e8d98d0e468)
  )

  (wire (pts (xy 158.75 114.3) (xy 179.07 114.3))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid b05af61d-3c1d-44cf-aea2-61fd169c9d1a)
  )
  (wire (pts (xy 158.75 121.92) (xy 179.07 121.92))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid b8a69dfb-4ff5-4171-8662-f4fd81f9fc4a)
  )
  (bus (pts (xy 114.3 78.74) (xy 130.81 78.74))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid b9086bc6-f594-4bed-870a-3805d2b7840b)
  )
  (bus (pts (xy 173.99 78.74) (xy 217.17 78.74))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid ca12753c-a5f4-49a4-bb14-a01420a86edb)
  )

  (wire (pts (xy 179.07 127) (xy 158.75 127))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid cf02db11-2ff8-4f79-b3e9-9802575ab786)
  )
  (bus (pts (xy 91.44 102.87) (xy 130.81 102.87))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid cfb29de7-5d87-4b80-bc4c-399de4fa7fae)
  )

  (wire (pts (xy 82.55 81.28) (xy 80.01 81.28))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid d5316dab-96ab-4569-a34d-520f96a50c86)
  )
  (bus (pts (xy 91.44 116.84) (xy 91.44 102.87))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid d827258b-50c4-46fc-b3a5-4b37a0dc9ee6)
  )
  (bus (pts (xy 173.99 63.5) (xy 217.17 63.5))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid eca73914-6f4b-487c-b8f6-6bedca0fa3fb)
  )
  (bus (pts (xy 123.19 119.38) (xy 106.68 119.38))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid f46f4b86-daf6-4869-98cb-928039f00f5f)
  )
  (bus (pts (xy 66.04 63.5) (xy 66.04 78.74))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid f683b564-906b-42f6-a233-cd22c58657dd)
  )
  (bus (pts (xy 130.81 102.87) (xy 130.81 78.74))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid fae21104-6d06-49da-9a8b-b74f2e8a3574)
  )

  (text "Description\n————————\nHalt Clock\nSelect Store Operand 0\nSelect Store Operand 1\nSelect Right Operand 1\nSelect Right Operand 2\nFlags Register In\nALU Carry input\nALU I0 input\nALU I1 input\nALU I2 input\nALU RS0 input\nALU RS1 input\nJump\nAbsolute Jump\nMemory Load\nMemory Store\nDrive the Store operand onto the bus I/O lines\nSelect write back source\nWrite back low byte\nWrite back high byte\nEnable write back to register file"
    (at 43.18 200.66 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 2ecadc66-69f8-45d0-bf37-af9bed077d19)
  )
  (text "#   Mnemonic\n——————————\n0  /HLT\n1   SelStoreOpA\n2   SelStoreOpB\n3   SelRightOpA\n4   SelRightOpB\n5   /FI\n6   CarryIn\n7   I0\n8   I1\n9   I2\n10  RS0\n11  RS1\n12  /J\n13  /JABS\n14  /MemLoad\n15  /MemStore\n16  /AssertStoreOp\n17  WriteBackSrc\n18  /WRL\n19  /WRH\n20  /WBEN"
    (at 20.32 200.66 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 8233de19-691a-4981-9177-f647c5ab854c)
  )
  (text "TODO: This circuit is buggy, I think because of the feedback signal on FLUSH"
    (at 92.71 33.02 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 9e25d0c3-1773-4885-932b-3dd30ea62709)
  )

  (label "Ins_EX[0..10]" (at 190.5 63.5 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 418a0e9c-c95f-4d4a-a88f-ec13faf3303c)
  )
  (label "Ctl_EX[0..20]" (at 190.5 78.74 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 7288ce3d-ad6e-43f5-96ca-99065d7798d0)
  )
  (label "Ctl_ID[0..22]" (at 106.68 116.84 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 796db869-0097-47e7-801f-cda0ea750e7a)
  )
  (label "Ctl_EX[0..20]" (at 106.68 119.38 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid b7e9cf10-b74e-4e80-a7f1-e33a29fe56de)
  )
  (label "Ins_ID[0..15]" (at 106.68 114.3 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid fd1d5da9-cff8-4c76-9b2b-14585edbbb1e)
  )

  (hierarchical_label "Carry" (shape input) (at 80.01 81.28 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 013a1c32-db17-4fdf-9087-65b8bebaf5c1)
  )
  (hierarchical_label "OVF" (shape input) (at 80.01 86.36 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 2bf34b7c-94ca-4ac8-94c5-6312536f342f)
  )
  (hierarchical_label "FWD_A" (shape output) (at 179.07 116.84 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 2cea7e27-6394-4df4-ac1c-163e3974eba6)
  )
  (hierarchical_label "Z" (shape input) (at 80.01 83.82 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 39f65f62-d48a-4aa3-a9a3-c17d058105fe)
  )
  (hierarchical_label "FWD_EX_TO_B" (shape output) (at 179.07 127 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 3ad742b0-3846-4693-9fdf-4d5261187ca9)
  )
  (hierarchical_label "Ctl_EX[0..20]" (shape output) (at 217.17 78.74 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 44f6de44-c3d8-405f-ac4c-196fb6e5deee)
  )
  (hierarchical_label "Ins_EX[0..10]" (shape input) (at 101.6 127 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 48d919bf-1f23-4426-bfff-25ceb2530f1f)
  )
  (hierarchical_label "STALL" (shape output) (at 179.07 114.3 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 7e9c7b14-3332-49ee-a587-5014a80db3f9)
  )
  (hierarchical_label "Ctl_MEM[14..20]" (shape input) (at 101.6 121.92 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 7f2c9904-545b-4337-acd6-8707e0924818)
  )
  (hierarchical_label "Ins_EX[0..10]" (shape output) (at 217.17 63.5 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 9f7324c5-50a2-442c-8a80-edf04aa2b2ac)
  )
  (hierarchical_label "FWD_MEM_TO_B" (shape output) (at 179.07 129.54 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid abd7f2b5-ebf6-4918-aadc-24dabcc8e48f)
  )
  (hierarchical_label "FWD_MEM_TO_A" (shape output) (at 179.07 121.92 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid d153cf8f-3cfc-4866-8bb5-6e189efc6334)
  )
  (hierarchical_label "SelC_MEM[0..2]" (shape input) (at 101.6 124.46 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid e382fedc-c868-44fd-9740-47cc05b15c1c)
  )
  (hierarchical_label "Ins_ID[0..15]" (shape input) (at 58.42 63.5 180)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid e5e03502-ed28-4743-9af6-23bafe8e639e)
  )
  (hierarchical_label "FWD_EX_TO_A" (shape output) (at 179.07 119.38 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid e73d5cff-eaf0-4767-b7c2-fda165aced8e)
  )
  (hierarchical_label "FWD_B" (shape output) (at 179.07 124.46 0)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid f4679fa8-ba18-4ec6-9bda-7def86487715)
  )

  (sheet (at 123.19 109.22) (size 35.56 22.86) (fields_autoplaced)
    (stroke (width 0) (type solid) (color 0 0 0 0))
    (fill (color 0 0 0 0.0000))
    (uuid 00000000-0000-0000-0000-00005fda967f)
    (property "Sheet name" "Hazard Control" (id 0) (at 123.19 108.5084 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheet file" "HazardControl.kicad_sch" (id 1) (at 123.19 132.6646 0)
      (effects (font (size 1.27 1.27)) (justify left top))
    )
    (pin "SelC_MEM[0..2]" input (at 123.19 124.46 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid ab5db7e5-9de7-449f-b70b-9d0dd610b10b)
    )
    (pin "Ins_EX[0..10]" input (at 123.19 127 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid a4813917-c395-4e03-b658-4133a12249cd)
    )
    (pin "Ctl_MEM[14..20]" input (at 123.19 121.92 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid f2cb3dc7-19c3-4d39-8479-4368f9d1680c)
    )
    (pin "Ctl_EX[0..20]" input (at 123.19 119.38 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 5900b9d3-f54e-4689-953a-e125f5f9fa71)
    )
    (pin "Ins_ID[0..15]" input (at 123.19 114.3 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid ee5ea3d6-1422-40d3-882b-9d8b9c72bbba)
    )
    (pin "STALL" output (at 158.75 114.3 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 6c1d0ff6-53d9-4a5b-89a8-5313d6ca7d94)
    )
    (pin "FLUSH" output (at 158.75 111.76 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 94b40fef-8e3d-4a32-a137-035c86ca86c8)
    )
    (pin "FWD_A" output (at 158.75 116.84 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid bb592211-9895-49a1-bb6a-47f7a9f85864)
    )
    (pin "FWD_EX_TO_A" output (at 158.75 119.38 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid a28b42a6-1c1a-4667-9b8b-ad6bdfd23632)
    )
    (pin "FWD_MEM_TO_A" output (at 158.75 121.92 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid fc56b098-c3aa-474b-aac9-da58d4f42386)
    )
    (pin "FWD_EX_TO_B" output (at 158.75 127 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid c360b637-6f5d-44e0-97f7-af09c2986ed7)
    )
    (pin "FWD_MEM_TO_B" output (at 158.75 129.54 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 91e34627-a183-42e4-bafa-955f631c2bab)
    )
    (pin "FWD_B" output (at 158.75 124.46 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 0df376e0-b3b8-4926-8318-ef70bcc43326)
    )
    (pin "Ctl_ID[0..22]" input (at 123.19 116.84 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid d0e144a3-6f5f-4307-ac4c-47637e9032bf)
    )
  )

  (sheet (at 82.55 76.2) (size 31.75 15.24) (fields_autoplaced)
    (stroke (width 0) (type solid) (color 0 0 0 0))
    (fill (color 0 0 0 0.0000))
    (uuid 00000000-0000-0000-0000-000060693bcf)
    (property "Sheet name" "sheet60693B97" (id 0) (at 82.55 75.4884 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheet file" "InstructionDecoder.kicad_sch" (id 1) (at 82.55 92.0246 0)
      (effects (font (size 1.27 1.27)) (justify left top))
    )
    (pin "Carry" input (at 82.55 81.28 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 92ba8945-0271-4dc3-a102-541bc7646045)
    )
    (pin "Z" input (at 82.55 83.82 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid c8ce7d0f-bd8a-416c-9bb9-339f4090a830)
    )
    (pin "Ins_ID[0..15]" input (at 82.55 78.74 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 3a41f6b2-d64e-4fc9-9c78-62461e28f42c)
    )
    (pin "OVF" input (at 82.55 86.36 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid fd2d066c-2ff9-43c4-ab8e-a65d2b71b5c1)
    )
    (pin "Ctl_ID[0..22]" output (at 114.3 78.74 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 815a0815-7930-45ec-8d6e-dc110f979c75)
    )
    (pin "FLUSH" input (at 82.55 88.9 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 539ff21e-64a5-4d0a-a3c6-87ad104f3729)
    )
  )

  (sheet (at 138.43 73.66) (size 35.56 10.16) (fields_autoplaced)
    (stroke (width 0) (type solid) (color 0 0 0 0))
    (fill (color 0 0 0 0.0000))
    (uuid 00000000-0000-0000-0000-000060693be1)
    (property "Sheet name" "sheet60693B98" (id 0) (at 138.43 72.9484 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheet file" "ID_EX_ControlWord.kicad_sch" (id 1) (at 138.43 84.4046 0)
      (effects (font (size 1.27 1.27)) (justify left top))
    )
    (pin "Ctl_ID[0..22]" input (at 138.43 78.74 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 050ccb9c-c92e-4885-96ad-3c8ee62baa70)
    )
    (pin "Ctl_EX[0..20]" output (at 173.99 78.74 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid c31b0de8-04f3-4322-ac80-83337fa9be21)
    )
  )

  (sheet (at 138.43 59.69) (size 35.56 7.62) (fields_autoplaced)
    (stroke (width 0) (type solid) (color 0 0 0 0))
    (fill (color 0 0 0 0.0000))
    (uuid 00000000-0000-0000-0000-000060693be5)
    (property "Sheet name" "sheet60693B99" (id 0) (at 138.43 58.9784 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheet file" "ID_EX_InstructionWord.kicad_sch" (id 1) (at 138.43 67.8946 0)
      (effects (font (size 1.27 1.27)) (justify left top))
    )
    (pin "Ins_ID[0..15]" input (at 138.43 63.5 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid a560f403-c7e0-4d97-9b6c-c5351bebb237)
    )
    (pin "Ins_EX[0..10]" output (at 173.99 63.5 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 5cfe5589-d53d-4797-82e8-c31b86c5fbb8)
    )
  )
)
