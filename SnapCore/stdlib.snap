struct None {}
let none = None {}

func panic(message: []u8) {
    puts("PANIC: ")
    puts(message)
    hlt()
}

func puts(s: []u8) {
    for c in s {
        putc(c)
    }
}

func putc(c: u8) {
    let kSerialDevice = 7
    let kDataPort = 1
    let kControlPort = 0
    let kPutCommand = 1
    let kSckHi = 1
    let kSckLo = 0

    pokePeripheral(kPutCommand, kDataPort, kSerialDevice)
    pokePeripheral(kSckHi, kControlPort, kSerialDevice)
    pokePeripheral(kSckLo, kControlPort, kSerialDevice)
    pokePeripheral(c, kDataPort, kSerialDevice)
    pokePeripheral(kSckHi, kControlPort, kSerialDevice)
    pokePeripheral(kSckLo, kControlPort, kSerialDevice)
}
