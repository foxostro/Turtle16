private let kSyscallRead = 0
private let kSyscallWrite = 1

public func getc() -> u8 {
    struct Arguments {
        character: u8
    }
    let args = Arguments {
        .character = 0
    }
    __syscall(kSyscallRead, &args bitcastAs *void)
    return args.character
}

public func putc(c: u8) {
    struct Arguments {
        character: u8
    }
    let args = Arguments {
        .character = c
    }
    __syscall(kSyscallWrite, &args bitcastAs *void)
}

public func puts(s: []const u8) {
    for c in s {
        putc(c)
    }
}

public func panic(message: []const u8) {
    static let kPanicPrefix = "PANIC: "
    static let kPanicSuffix = "\n"
    puts(kPanicPrefix)
    puts(message)
    puts(kPanicSuffix)
    hlt()
}

public func __oob() {
    static let kPanicMessageOOB = "array access is out of bounds"
    panic(kPanicMessageOOB)
}
